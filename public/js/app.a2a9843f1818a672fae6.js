webpackJsonp([1],{"1z0p":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("j1ja");var o=n("hKoQ"),a=n.n(o),i=n("7+uW"),s=n("/ocq"),r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"search"},[this._v("\n  search\n")])},staticRenderFns:[]},l=n("VU/8")({name:"Search",data:function(){return{pk:"",channelName:"",channelType:"AddWebChannel",channelText:"",monitor:"1",linkType:"1",publicNo:"",appId:"",appSecret:"",sendType:"1",sendLink:""}},methods:{setChannel:function(t){}}},r,!1,null,null,null).exports;l.install=function(t){t.component(l.name,l)};var u=l,c={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"repository"},[this._v("\n  Repository\n")])},staticRenderFns:[]},h=n("VU/8")({name:"Repository",data:function(){return{pk:"",channelName:"",channelType:"AddWebChannel",channelText:"",monitor:"1",linkType:"1",publicNo:"",appId:"",appSecret:"",sendType:"1",sendLink:""}},methods:{setChannel:function(t){}}},c,!1,null,null,null).exports;h.install=function(t){t.component(h.name,h)};var p=h;i.default.use(s.a);var f=new s.a({routes:[{path:"/search",name:"",component:u,meta:{title:"搜索"}},{path:"/Repository",name:"Repository",component:p,meta:{title:"仓库"}}],defaultTile:"首页"}),d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal",router:t.router,"default-active":"1"}},t._l(t.menu,function(e){return n("el-menu-item",{key:e.name,attrs:{index:e.path}},[n("span",{attrs:{slot:"title"},domProps:{textContent:t._s(e.title)},slot:"title"})])})),t._v(" "),n("keep-alive",[n("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$route.meta.title,expression:"$route.meta.title"}],staticClass:"routerView"})],1)],1)},staticRenderFns:[]};var m=n("VU/8")({name:"App",data:function(){return{router:!0,menu:[{title:"搜索",name:"search",path:"search"},{title:"仓库",name:"repository",path:"repository"}]}},computed:{},created:function(){},mounted:function(){},methods:{}},d,!1,function(t){n("zttW")},null,null).exports,v=n("NYxO"),k=function(t){return this.x=t.x||0,this.y=t.y||0,this.type=t.type||0,this.alive=1,this},y={state:{wLength:11,hLength:11,size:30,point:0,background:[],backgroundMatrix:[]},getters:{size:function(t,e){return Math.floor(Math.min(window.innerWidth/t.wLength,window.innerHeight/t.hLength))},blocks:function(t){var e=[],n=t.backgroundMatrix;return t.backgroundMatrix.forEach(function(t,o){t.forEach(function(t,a){var i=new k({x:a,y:o,type:t});n[o][a]=i,0!==t&&e.push(i)})}),t.background=e,n}},actions:{changeSize:function(t,e){(0,t.commit)("changeSize",e)},changeBackground:function(t,e){(0,t.commit)("changeBackground",e)},breakBlock:function(t,e){(0,t.commit)("breakBlock",{getters:t.getters,position:e})},resetGame:function(t){var e=t.commit,n=t.rootState;e("dieAllTanks"),e("resetGame",n)}},mutations:{resetGame:function(t,e){e.tanks.myTanks=[],e.bullets.bullets=[]},changeSize:function(t,e){t.size=Math.floor(Math.min(e/t.wLength,e/t.hLength))},changeBackground:function(t,e){t.backgroundMatrix=e},breakBlock:function(t,e){var n=e.getters,o=e.position;n.blocks[o.y][o.x].type=0;var a=[];t.background.forEach(function(t,e){t.x===o.x&&t.y===o.y||a.push(t)}),t.background=a}}},g=function(t){var e=this;return e.type=t.type||0,e.no=t.no||0,e.width=2,e.height=10,e.level=t.level||0,e.direction=t.direction||0,e.left=t.left||0,e.top=t.top||0,e.alive=!0,e.speed=t.speed||3,e.hitWall=function(){return(e.top<0||e.left<0||e.left>y.state.size*y.state.wLength-e.width||e.top>y.state.size*y.state.hLength-e.height)&&(e.alive=!1,!0)},e.hitBlock=function(){var t,n=Math.min(Math.max(Math.floor(e.left/y.state.size),0),y.state.wLength-1),o=Math.min(Math.max(Math.floor(e.top/y.state.size),0),y.state.hLength-1);return 0!==y.state.backgroundMatrix[o][n].type&&(t=y.state.backgroundMatrix[o][n]),t},e.hitTank=function(t){var n;return t.forEach(function(t){e.left>t.left&&e.left<t.left+t.width&&e.top>t.top&&e.top<t.top+t.height&&(n=t)}),n},e.hitBullet=function(){var t;return w.getters.aliveBullets.forEach(function(n){e.no!==n.no&&Math.abs(e.left-n.left)<10&&Math.abs(e.top-n.top)<10&&(t=n)}),t},e},T={state:{bullets:[]},getters:{aliveBullets:function(t){var e=[];return t.bullets.forEach(function(t){!0===t.alive&&e.push(t)}),e}},actions:{addBullet:function(t,e){(0,t.commit)("addBullet",e)},breakBullet:function(t,e){(0,t.commit)("breakBullet",e)}},mutations:{addBullet:function(t,e){t.bullets.push(new g(e))},breakBullet:function(t,e){e.alive=!1}}},M=0,b=function(t){var e=this;return e.no=M,M++,e.type=t.type||0,e.level=t.level||0,e.direction=t.direction||1,e.left=t.x?t.x*y.state.size:0,e.top=t.y?t.y*y.state.size:0,e.x=t.x||0,e.y=t.y||0,e.width=y.state.size,e.height=y.state.size,e.alive=!0,e.speed=2,e.setPosition=function(t,n){e.left=t*y.state.size,e.top=n*y.state.size},e.goStep=function(t){var n=!1,o=t>1?1:-1;for(e.direction=t,t%2==0?e.left=e.left+o*e.speed:e.top=e.top+o*e.speed;e.hitWall();)e.stepBack(),n=!0;for(;e.hitBlock();)e.stepBack(),n=!0;for(;e.hitTank();)e.stepBack(),n=!0;return e.x=Math.min(Math.max(Math.floor(e.left/y.state.size),0),y.state.wLength-1),e.y=Math.min(Math.max(Math.floor(e.top/y.state.size),0),y.state.hLength-1),n},e.stepBack=function(){var t=e.direction,n=t>1?1:-1;t%2==0?e.left=e.left-n:e.top=e.top-n},e.cold=!1,e.shoot=function(){if(!0!==e.cold){e.cold=!0;var t=new g({direction:e.direction,left:e.left+y.state.size/2,top:e.top+y.state.size/2,speed:e.speed+2,level:e.level,type:e.type,no:e.no});return setTimeout(function(){e.cold=!1},300),t}},e.hitWall=function(){return e.top<0||e.left<0||e.left>y.state.size*y.state.wLength-y.state.size||e.top>y.state.size*y.state.hLength-y.state.size},e.hitBlock=function(){for(var t=!1,n={x:Math.floor(e.left/y.state.size),y:Math.floor(e.top/y.state.size),stepx:Math.ceil(e.left%y.state.size/y.state.size),stepy:Math.ceil(e.top%y.state.size/y.state.size)},o=Math.max(n.y,0),a=Math.min(n.y+n.stepy,y.state.hLength-1),i=Math.max(n.x,0),s=Math.min(n.x+n.stepx,y.state.wLength-1),r=i;r<=s;r++)for(var l=o;l<=a;l++)0!==y.state.backgroundMatrix[l][r].type&&(t=!0);return t},e.hitTank=function(){var t=!1;return w.getters.tanksArray.forEach(function(n){e.no!==n.no&&Math.abs(e.left-n.left)<n.width&&Math.abs(e.top-n.top)<n.height&&(t=!0)}),t},e.die=function(){e.alive=!1,e.autoShootTimeout&&clearTimeout(e.autoShootTimeout)},e.reborn=function(t,n){e.alive=!0,e.level=0,e.setPosition(t,n)},e.levelUp=function(t,n){e.level++,e.speed=Math.min(10,2*(e.level+1))},3===e.type&&(e.autoShoot=function(){e.autoShootTimeout&&clearTimeout(e.autoShootTimeout),e.autoShootTimeout=setTimeout(function(){var t=e.shoot();t&&T.state.bullets.push(t),e.autoShoot()},3e3)},e.AIMove=function(){var t=Math.floor(20*Math.random())+20;e.AIStep=function(){setTimeout(function(){var n=e.goStep(e.direction);if(t--,e.alive)if(!n&&t>0)e.AIStep();else if(n){e.direction=(e.direction+Math.floor(3*Math.random()))%4;var o=e.shoot();o&&T.state.bullets.push(o),e.autoShoot(),e.AIMove()}else e.direction=(e.direction+Math.floor(4*Math.random()))%4,e.AIMove()},100)},e.AIStep()},setTimeout(function(){e.alive&&(e.AIMove(),e.autoShoot())},5e3)),e},x={dieAllTanks:function(t){t.myTanks.forEach(function(t){t.die()}),t.opTanks.forEach(function(t){t.die()}),t.opIndex=0},addTank:function(t,e){t.myTanks.push(new b(e))},goStep:function(t,e){t.myTanks[0].goStep(e)},shoot:function(t){var e=t.myTanks[0].shoot();e&&T.state.bullets.push(e)},destory:function(t){},addOpTank:function(t,e){e.type=3,t.opTanks.push(new b(e))},opShoot:function(t){T.state.bullets.push(t.opTanks[0].shoot())},attackTank:function(t,e){var n=e.tank,o=e.bullet;if(n.level--,n.level<0)if(0===o.type&&t.myTanks[0].levelUp(),n.die(),0===n.type)setTimeout(function(){n.reborn(3,10)},3e3);else if(3===n.type){var a=5*t.opIndex;t.opIndex=(t.opIndex+1)%3,x.addOpTank(t,{level:0,x:a,y:0,direction:3})}}},z={state:{myTanks:[],opTanks:[],opIndex:0},getters:{aliveTanks:function(t){var e=[];return t.myTanks.forEach(function(t){!0===t.alive&&e.push(t)}),e},aliveOpTanks:function(t){var e=[];return t.opTanks.forEach(function(t){!0===t.alive&&e.push(t)}),t.opTanks=e,t.opTanks},tanksArray:function(t,e){var n=[];return e.aliveTanks.concat(e.aliveOpTanks).forEach(function(t){!0===t.alive&&n.push(t)}),n}},actions:{addTank:function(t,e){(0,t.commit)("addTank",e)},goStep:function(t,e){(0,t.commit)("goStep",e)},shoot:function(t){(0,t.commit)("shoot")},addOpTank:function(t,e){(0,t.commit)("addOpTank",e)},opShoot:function(t){(0,t.commit)("opShoot")},attackTank:function(t,e){(0,t.commit)("attackTank",{tank:e.tank,bullet:e.bullet})}},mutations:x};i.default.use(v.a);var w=new v.a.Store({modules:{game:y,tanks:z,bullets:T}}),S=n("zL8q"),B=n.n(S),L=n("YqKu"),A=n.n(L);n("1Wvq"),n("1z0p"),n("e0XP"),n("tvR6");a.a.polyfill(),i.default.use(A.a),i.default.use(B.a),new i.default({el:"#app",components:{App:m},router:f,store:w,template:"<App/>"})},e0XP:function(t,e){},tvR6:function(t,e){},zttW:function(t,e){}},["NHnr"]);